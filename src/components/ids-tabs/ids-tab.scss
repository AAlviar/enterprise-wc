@import '../../core/ids-base';

:host(ids-tab:not([orientation='vertical']):first-child),
.ids-tab-container:not([orientation='vertical']):first-child {
  @include ml-4;
}

:host(ids-tab:not([orientation='vertical']):last-child),
.ids-tab-container:not([orientation='vertical']):last-child {
  @include mr-4;
}

:host(ids-tab:not([orientation='vertical']):not(:last-child)),
.ids-tab-container:not([orientation='vertical']):not(:last-child) {
  @include mr-8;
}

:host(ids-tab:focus-visible),
.ids-tab-container:focus-visible {
  outline: none;
}

.ids-tab {
  @include px-4();
  @include border-1();
  @include border-solid();

  box-sizing: border-box;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-end;
  list-style: none outside none;
  border-color: transparent;
  height: 100%;

  &:focus-visible,
  &:focus,
  &:focus-within {
    @include shadow();
    @include border-solid();

    outline: none;
  }

  &:not(.selected) {
    cursor: pointer;
  }

  &.selected {
    cursor: default;

    &.ids-text {
      @include font-bold();
    }
  }

  // =================================================
  // Counts

  &.count {
    @include px-12();
  }

  // =================================================
  // Orientation-specific layouts

  &:not(.orientation-vertical) {
    @include rounded-default();
    @include pb-8();

    border-bottom-width: 0;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;

    // cannot read css var for color in ::after
    // without shadowDOM scope so need .selection-underline div
    // as workaround
    &::after,
    & .selection-underline {
      position: absolute;
      bottom: 0;
      height: 3px;
      left: -1px;
      width: calc(100% + 2px);
      z-index: 1;
      pointer-events: none;
      content: '';
    }

    &:not(.count) {
      @include pt-8;
    }
  }

  &.orientation-vertical {
    @include pl-24();

    display: flex;
    align-items: flex-start;
    justify-content: center;
    width: 100%;
    height: 42px;

    &.selected {
      &:focus {
        &::before {
          @include border-1();
          @include border-solid();

          position: absolute;
          top: 1px;
          left: 1px;
          width: calc(100% - 4px);
          height: calc(100% - 4px);
          content: '';
          pointer-events: none;
        }
      }
    }
  }

  // =================================================
  // Makes text appear bolded without shuddering the widths;
  // Text Content is set in IdsTab `rendered();`

  ids-text::part(text),
  .ids-tab.ids-text {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
  }

  & ids-text::part(text)::after,
  &.ids-tab.ids-text::after {
    @include font-bold();

    content: attr(data-text);
    content: attr(data-text) / '';
    visibility: hidden;
    height: 0;
    user-select: none;
    pointer-events: none;

    @media speech {
      display: none;
    }
  }

  // =================================================
  // Light Mode

  &:not([mode]),
  &[mode='light'] {
    &:hover {
      @include text-slate-100();
    }

    &:not(.selected) {
      @include text-slate-70;
    }

    &.selected {
      @include text-azure-60;
    }

    // =================================================
    // Light Mode / Default Color Variant

    &:not([class*='color-variant-']) {
      &:focus-visible,
      &:focus,
      &:focus-within {
        @include border-azure-60();
      }

      // Horizontal Tab Styles
      &:not(.orientation-vertical) {
        &:hover {
          &::after,
          & .selection-underline {
            @include bg-slate-100();
          }
        }

        &.selected {
          &::after,
          & .selection-underline {
            @include bg-azure-60();
          }
        }
      }

      &.orientation-vertical {
        &.selected {
          @include border-none();
          @include bg-azure-60();
          @include text-white();

          &:focus {
            &::before {
              @include border-white();
            }
          }
        }
      }
    }

    // =================================================
    // Light Mode / Alternate Color Variant

    &.color-variant-alternate {
      &:hover::after {
        @include bg-white();
      }

      &:focus-visible,
      &:focus,
      &:focus-within {
        @include border-white();
      }

      &:not(.selected) {
        color: rgba(255 255 255 / 0.7);
      }

      &.selected {
        color: var(--ids-color-palette-white);
      }

      // Horizontal Tab Styles
      &:not(.orientation-vertical) {
        &.selected {
          &::after,
          & .selection-underline {
            @include bg-white();
          }
        }
      }
    }

    // =================================================
    // Light Mode / Module Tabs Color Variant

    &.color-variant-module {
      background-color: #aa0000;

      // Horizontal Tab Styles
      &:not(.orientation-vertical) {

      }
    }
  }

  // =================================================
  // Dark Mode

  &[mode='dark'] {
    &:not(.selected) {
      @include text-slate-20;
    }

    &:hover {
      @include text-white();
    }

    &:not(.orientation-vertical) {
      &:hover {
        &::after,
        & .selection-underline {
          @include bg-white();
        }
      }
    }

    // =================================================
    // Dark Mode / Default Color Variant

    &:not([class*='color-variant-']) {
      &:focus-visible,
      &:focus,
      &:focus-within {
        @include border-azure-40();
      }

      &.selected {
        @include text-azure-40();
      }

      &:not(.orientation-vertical) {
        &.selected {
          &::after,
          & .selection-underline {
            @include bg-azure-40();
          }
        }
      }
    }
  }

  // =================================================
  // Contrast Mode

  &[mode='contrast'] {
    &:not(.selected) {
      @include text-slate-100;
    }

    &.selected {
      @include text-azure-90;
    }

    // =================================================
    // Dark Mode / Default Color Variant

    &:not([class*='color-variant-']) {
      &:focus-visible,
      &:focus,
      &:focus-within {
        @include border-azure-90();
      }

      &:not(.orientation-vertical) {
        &::after,
        & .selection-underline {
          @include bg-azure-90();
        }
      }
    }
  }
}
