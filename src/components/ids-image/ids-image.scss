@use '../../themes/mixins/ids-core-mixins' as mixins;
@use 'sass:list';

$image-sizes: (
  'sm': (60px, 60px),
  'md': (154px, 120px),
  'lg': (300px, 350px),
);

:host {
  display: inline-block;
  max-width: 100%;
}

// set size
@each $key, $value in $image-sizes {
  :host([size='#{$key}']) .ids-image,
  .ids-image.#{$key} {
    width: list.nth($value, 1);
    height: list.nth($value, 2);
  }
}

// focus state
:host(:focus-visible) {
  outline: none;
}

:host(:focus),
:host(:focus-visible) {
  .ids-image {
    border-color: var(--ids-focus-ring-border-color);
    box-shadow: var(--ids-shadow-lg);
  }
}

// theme mode
:host .placeholder,
.ids-image.placeholder {
  border-color: var(--ids-disabled-text-color);

  ids-icon {
    color: var(--ids-subtle-text-color);
  }
}

// round attribute
:host([round='true']) .ids-image,
.ids-image.round {
  border-radius: var(--ids-border-radius-round);
  min-width: 50px;
  max-width: 50px;
  width: 50px;
  height: 50px;
}

// user-status attribute
:host([user-status]),
.user-status-wrapper {
  position: relative;
}

.ids-image {
  box-sizing: border-box;
  border: 1px solid transparent;
  max-width: 100%;
  height: auto;

  // img only related
  &:not(.placeholder):not(.initials) {
    display: block;
    object-fit: cover;
  }

  &.placeholder {
    align-items: center;
    display: inline-flex;
    background-color: var(--ids-body-background-color);
    justify-content: center;
    min-width: 50px;
    min-height: 50px;
  }

  &.initials {
    align-items: center;
    display: flex;
    justify-content: center;
    min-width: 50px;
    min-height: 50px;
    background-color: var(--ids-image-initials-background-color);
    color: var(--ids-color-slate-00);
    text-transform: uppercase;
  }

  .audible {
    @include mixins.audible();
  }
}

.user-status {
  position: absolute;
  width: 18px;
  height: 18px;
  right: -1px;
  bottom: -3px;

  // icon colors
  &.available {
    color: var(--ids-color-success-03);
  }

  &.busy,
  &.do-not-disturb {
    color: var(--ids-color-error-03);
  }

  &.away {
    color: var(--ids-color-warning-03);
  }

  &.unknown {
    color: var(--ids-disabled-text-color);
  }

  // background for svg
  &::after {
    position: absolute;
    border-radius: var(--ids-border-radius-round);
    background-color: var(--ids-color-inverse);
    content: '';
    width: 16px;
    height: 16px;
    left: 1px;
    top: 1px;
  }

  ids-icon {
    z-index: 1;
  }
}

.user-status-wrapper .user-status {
  svg {
    border-radius: var(--ids-border-radius-round);
    background-color: var(--ids-color-inverse);
  }

  position: unset;
  width: 18px;
  height: 18px;
  margin-left: 36px;
  margin-top: -18px;
}
