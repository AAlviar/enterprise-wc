@import '../../core/ids-base';

$image-sizes: (
  'sm': (60px, 60px),
  'md': (154px, 120px),
  'lg': (300px, 350px),
);

$user-statuses: (
  'available': var(--ids-color-status-success),
  'away': var(--ids-color-status-caution),
  'busy': var(--ids-color-status-danger),
  'do-not-disturb': var(--ids-color-status-danger),
  'unknown': var(--ids-color-palette-slate-30)
);

:host {
  display: inline-block;
  max-width: 100%;
}

// set size
@each $key, $value in $image-sizes {
  :host([size='#{$key}']) {
    .ids-image {
      width: nth($value, 1);
      height: nth($value, 2);
    }
  }
}

// focus state
:host(:focus-visible) {
  outline: none;
}

:host([mode='light']:focus),
:host([mode='light']:focus-visible) {
  .ids-image {
    @include border-azure-60();

    box-shadow: 0 0 4px 3px rgba(54, 138, 192, 0.3);
  }
}

:host([mode='dark']:focus),
:host([mode='dark']:focus-visible) {
  .ids-image {
    @include border-azure-60();

    box-shadow: 0 0 4px 2px rgba(141, 201, 230, 0.3);
  }
}

:host([mode='contrast']:focus),
:host([mode='contrast']:focus-visible) {
  .ids-image {
    @include border-azure-90();

    box-shadow: 0 0 4px 2px rgba(41, 41, 41, 0.3);
  }
}

:host([round='true']) {
  .ids-image {
    @include rounded-round();

    width: 50px;
    height: 50px;
  }
}

:host([user-status]) {
  @include relative();
}

.ids-image {
  @include box-border();
  // to prevent jump on focus
  @include border-solid();
  @include border-1();
  @include border-transparent();

  max-width: 100%;
  height: auto;

  // img only related
  &:not(.placeholder) {
    object-fit: cover;
  }

  // placeholder styles
  &.placeholder {
    @include inline-flex();
    @include border-slate-20();
    @include p-20();
    @include w-full();
    @include h-full();

    align-items: center;
    justify-content: center;
  }

  .audible {
    @include audible();
  }
}

.user-status {
  @include absolute();

  width: 18px;
  height: 18px;
  right: -1px;
  bottom: 1px;

  // icon color
  @each $key, $value in $user-statuses {
    &.#{$key} {
      color: $value;
    }
  }

  ids-icon {
    @include z-1();
  }

  // background for svg
  &::after {
    @include absolute();
    @include rounded-round();
    @include bg-slate-10();
    content: '';
    width: 16px;
    height: 16px;
    left: 1px;
    top: 1px;
  }
}
