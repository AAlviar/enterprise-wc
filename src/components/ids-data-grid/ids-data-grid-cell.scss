/* Ids Data Grid Component - Cells */
.ids-data-grid-cell {
  // Border and Background and Sizing
  align-items: center;
  border-inline-start: 1px solid;
  border-block-end: 1px solid;
  border-color: var(--ids-data-grid-cell-border-color);
  display: inline-flex;
  color: var(--ids-data-grid-cell-text-color);
  height: 50px;
  overflow: hidden;
  position: relative;
  white-space: nowrap;

  // Hide first/last border
  &:first-child {
    border-inline-start-width: 0;
  }

  // Reset badge margin to center it vertically
  ids-badge::part(badge) {
    margin-block-end: var(--ids-spacing-none);
    margin-inline-end: var(--ids-spacing-none);
  }

  ids-badge {
    padding-inline-start: var(--ids-spacing-xxl);
    padding-inline-end: var(--ids-spacing-xxl);
  }

  ids-hyperlink {
    margin: var(--ids-spacing-xxl);
  }

  // Text ellipsis
  .text-ellipsis {
    align-content: center;
    align-items: center;
    display: inline-flex;
    padding-inline-start: var(--ids-spacing-xxl);
    padding-inline-end: var(--ids-spacing-xxl);
    flex-flow: row nowrap;
    height: inherit;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  // Text Alignment
  &.align-center > *:first-child {
    display: inline-flex;
    margin: 0 auto;
  }

  &.align-right > *:first-child {
    margin-inline-start: auto;
    margin-inline-end: 0;
  }

  // Readonly and disabled Cells
  &.is-readonly {
    background-color: var(--ids-data-grid-cell-readonly-background-color);
  }

  &.is-disabled {
    color: var(--ids-data-grid-cell-disabled-text-color);
  }

  // Focus State
  &:focus,
  &.is-editing:not(.is-inline):focus-within {
    box-shadow: var(--ids-shadow-md);
    outline: 1px solid var(--ids-focus-ring-border-color);
    outline-offset: -1px;
  }

  &.is-editable {
    &.is-inline {
      box-shadow: inset 0 0 0 4px var(--ids-component-background-color), inset 0 0 0 5px var(--ids-component-border-color);

      ids-icon.editor-cell-icon {
        visibility: visible;
        margin-inline-end: 14px;
      }
    }

    &.is-timepicker,
    &.is-datepicker {
      justify-content: space-between;

      .text-ellipsis {
        padding-inline-end: 0;
      }
    }

    .editor-cell-icon {
      margin-inline-end: 10px;
      display: none;
    }

    // is-borderless:hover
    &:not(.is-inline):not(.is-invalid):focus,
    &:not(.is-inline):not(.is-invalid):hover {
      .editor-cell-icon {
        display: flex;
      }

      ids-alert {
        margin-inline: calc(100% - 48px);
      }
    }

    &.is-editable.is-invalid {
      justify-content: space-between;

      ids-alert {
        margin-inline-end: var(--ids-spacing-lg);
      }
    }
  }

  &.is-editing ids-checkbox {
    display: flex;
    justify-content: center;
    width: 100%;
    position: relative;
    left: 6px;
    top: 4px;
  }

  // Editing with popups
  &.is-editing.is-dropdown,
  &.is-editing.is-timepicker,
  &.is-editing.is-datepicker {
    overflow: visible;
  }

  // Dropdown Editable Cell
  &.is-editable.is-dropdown {
    .dropdown-cell-value {
      width: 100%;
    }
  }

  // Dropdown Editing
  &.is-editing.is-dropdown {
    &.is-dirty::before {
      margin-inline: 3px;
    }
  }

  // Dropdown Editing Borderless
  &.is-editing.is-dropdown:not(.is-inline) {
    border-left-width: 0;
  }

  // Dropdown Editing Inline
  &.is-editing.is-dropdown.is-inline {
    box-shadow: none;

    ids-dropdown {
      padding: 0 4px;
    }

    &.is-dirty::before {
      margin-inline: 6px;
    }
  }

  // Frozen Cells
  &.frozen {
    background-color: var(--ids-data-grid-cell-background-color);
    position: sticky;
    z-index: 3;
  }

  // Change borders for scrolling
  &.frozen-last {
    border-inline-end: 1px solid var(--ids-data-grid-cell-border-color);

    + .ids-data-grid-cell {
      border-inline-start-width: 0;
    }
  }

  &.frozen-left {
    position: sticky;
    left: 0;

    // Dynamically added widths
    @for $i from 2 through 10 {
      &:nth-of-type(#{$i}) {
        left: var(--ids-data-grid-frozen-column-left-width-#{$i});
      }
    }
  }

  &.frozen-right {
    position: sticky;
    right: 0;
  }

  &.is-dirty::before {
    border-color: var(--ids-dirty-indicator-background-color) transparent transparent var(--ids-dirty-indicator-background-color);
    border-style: solid;
    border-width: 5px;
    content: '';
    display: inline-block;
    margin-inline: 2px;
    position: absolute;
    top: 2px;
    z-index: 1;
  }

  &.is-dirty.is-inline::before {
    margin-inline: 6px;
    top: 6px;
  }

  &.is-invalid {
    background-color: var(--ids-data-grid-cell-invalid-background-color);
  }

  ids-alert {
    margin-top: 3px;
  }
}

[data-row-height='xs'] {
  .ids-data-grid-cell.is-dirty::before {
    border-width: 4px;
  }

  .ids-data-grid-cell.is-dirty.is-inline::before {
    margin-inline: 3px;
    top: 3px;
  }

  .is-editable.is-inline {
    box-shadow: inset 0 0 0 2px var(--ids-component-background-color), inset 0 0 0 3px var(--ids-component-border-color);
  }
}

[data-row-height='sm'] {
  .is-editable.is-inline {
    box-shadow: inset 0 0 0 3px var(--ids-component-background-color), inset 0 0 0 4px var(--ids-component-border-color);
  }

  .ids-data-grid-cell.is-dirty.is-inline::before {
    margin-inline: 5px;
    top: 5px;
  }
}

// List Style Feature
.ids-data-grid.is-list-style {
  // Change Cell Borders/BG
  .ids-data-grid-cell {
    border-inline-start-width: 0;
    border-bottom: 1px solid var(--ids-data-grid-list-cell-border-color);

    &.is-readonly {
      background-color: var(--ids-data-grid-cell-readonly-background-color)
    }

    &.is-disabled {
      color: var(--ids-data-grid-cell-disabled-text-color);
    }
  }

  .ids-data-grid-body .ids-data-grid-row:first-child .ids-data-grid-cell {
    border-top: 0;
  }
}

// Standalone Css
td.ids-data-grid-cell {
  display: table-cell;
  padding-inline-start: var(--ids-spacing-xxl);
  padding-inline-end: var(--ids-spacing-xxl);
}

// Handle RTL
:host([dir='rtl']) {
  .ids-data-grid.is-list-style {
    .ids-data-grid-cell {
      border-inline-end-width: 0;
    }
  }

  // Negate Borders
  .ids-data-grid-cell {
    &:last-child {
      border-inline-end-width: 0;
    }

    &.is-dirty::before {
      border-color: var(--ids-dirty-indicator-background-color)  var(--ids-dirty-indicator-background-color) transparent  transparent;
    }
  }
}
